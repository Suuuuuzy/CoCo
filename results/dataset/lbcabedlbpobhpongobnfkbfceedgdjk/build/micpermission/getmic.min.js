function enableMicrophone(e){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){e.getAudioTracks()[0].stop(),window.top.postMessage({micIsOn:!0},"*")}).catch(function(t){console.log(t),window.top.postMessage({micSetupError:!0,requesttype:e},"*")})}window.addEventListener("message",function(e){e.source==window.top&&(e.data.type&&"ENABLE_MICROPHONE"==e.data.type?enableMicrophone(e.data.requesttype):e.data.type&&"GET_MIC_DEVICES"==e.data.type&&navigator.mediaDevices.enumerateDevices().then(function(e){for(var t=[],o=0;o<e.length;o++)"audioinput"===e[o].kind&&t.push({id:e[o].deviceId,label:e[o].label||"Mic "+(t.length+1)});window.top.postMessage({listOfMicDevices:t},"*")}).catch(function(t){console.log(t),window.top.postMessage({micSetupError:!0,requesttype:e.data.requesttype},"*")}))},!1),enableMicrophone("auto");