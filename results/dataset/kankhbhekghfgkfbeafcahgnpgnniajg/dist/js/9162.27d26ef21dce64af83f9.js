(self.webpackChunknewtab=self.webpackChunknewtab||[]).push([[9162,9728],{1200:t=>{t.exports='<div class="folder-content"></div>'},8411:t=>{t.exports='<div class="list-inline-item data-icon bg-hover rounded-lg"> <i class="icon-more-vert rounded-circle" data-toggle="dropdown"></i> <div class="dropdown-menu"> <div class="dropdown-item move" data-action="move"> {{move}} <div class="move-to rounded-right"> </div> </div> <a class="dropdown-item edit" data-action="edit">{{edit}}</a> </div> <div class="list-inline-item-data" title="{{title}}"> <div class="folder-box"> {{items}} </div> <div class="title mt-1">{{title}}</div> </div> </div>'},7516:t=>{t.exports='<form> <div class="form-group"> <label>{{name}}:</label> <input type="text" id="name" autocomplete="off" class="form-control form-control-sm"> </div> <div class="form-group"> <label>{{url}}:</label> <input type="text" id="url" autocomplete="off" required="required" class="form-control form-control-sm"> </div> <div class="form-group text-right mt-4"> <input type="button" value="{{cancel}}" class="btn btn-cancel btn-sm btn-light"> <input type="submit" value="{{done}}" class="btn btn-submit btn-sm btn-info"/> </div> </form>'},2772:t=>{t.exports='<form> <div class="form-group"> <label>{{name}}:</label> <input type="text" id="name" autocomplete="off" class="form-control form-control-sm"> </div> <div class="form-group text-right mt-4"> <input type="button" value="{{cancel}}" class="btn btn-cancel btn-sm btn-light"> <input type="submit" value="{{done}}" class="btn btn-submit btn-sm btn-info"/> </div> </form>'},2514:(t,e,i)=>{var s=i(7091),a=i(4597),n=i(5554),o=i(2998),d=i(8022),r=i(4158),l=i(2676),c=i(1848),h=i(1920),p=i(3212),g='<div class="sc-main row"> <div class="sc-left col-3"> <ul class="list-inline"> <li id="sc-popular" class="active">{{popular}}</li> <li id="sc-widgets">{{widgets}}</li> <li id="sc-custom">{{custom}}</li> </ul> </div> <div class="sc-right col-9"> <div class="sc-popular sc-right-box"> <div class="mb-2"> <form> <input type="text" class="search-input form-control form-control-sm d-inline-block shadow-sm"> </form> </div> <div class="table-responsive"> <table class="table table-hover"> <thead> <tr> <th width="10%">{{icon}}</th> <th width="70%">{{name}}</th> <th width="20%"></th> </tr> </thead> <tbody> </tbody> </table> </div> </div> <div class="sc-widgets sc-right-box d-none"> <div class="mb-2"> <form> <input type="text" class="search-input form-control form-control-sm d-inline-block shadow-sm"> </form> </div> <div class="table-responsive"> <table class="table table-hover"> <thead> <tr> <th width="10%">{{icon}}</th> <th width="70%">{{name}}</th> <th width="20%"></th> </tr> </thead> <tbody> <tr> <td class="text-center"><img src="'+s(a)+'"/></td> <td class="widget-name" data-type="weather" data-name="{{widget_weather}}">{{widget_weather}} - {{widget_weather_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(n)+'"/></td> <td class="widget-name" data-type="dtime" data-name="{{widget_dtime}}">{{widget_dtime}} - {{widget_dtime_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(o)+'"/></td> <td class="widget-name" data-type="pdf" data-name="{{widget_pdf_converter}}">{{widget_pdf_converter}} - {{widget_pdf_converter_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(d)+'"/></td> <td class="widget-name" data-type="MapsDirections" data-name="{{widget_maps_directions}}">{{widget_maps_directions}} - {{widget_maps_directions_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(r)+'"/></td> <td class="widget-name" data-type="MapsLocations" data-name="{{widget_maps_locations}}">{{widget_maps_locations}} - {{widget_maps_locations_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr class="widget-gmail"> <td class="text-center"><img src="'+s(l)+'"/></td> <td class="widget-name" data-type="gmail" data-name="{{widget_gmail}}" data-type="">{{widget_gmail}} - {{widget_gmail_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(c)+'"/></td> <td class="widget-name" data-type="todo" data-name="{{widget_todo}}">{{widget_todo}} - {{widget_todo_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(h)+'"/></td> <td class="widget-name" data-type="notes" data-name="{{widget_notes}}">{{widget_notes}} - {{widget_notes_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(p)+'"/></td> <td class="widget-name" data-type="tracking" data-name="{{widget_tracking}}">{{widget_tracking}} - {{widget_tracking_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> </tbody> </table> </div> </div> <div class="sc-custom sc-right-box d-none"> <form> <div class="form-group"> <label>{{name}}:</label> <input type="text" id="name" autocomplete="off" class="form-control form-control-sm"> </div> <div class="form-group"> <label>{{url}}:</label> <input type="text" id="url" autocomplete="off" required="required" class="form-control form-control-sm"> </div> <div class="form-group text-right mt-4"> <input type="button" value="{{cancel}}" class="btn btn-cancel btn-sm btn-light"> <input type="submit" value="{{done}}" class="btn btn-submit btn-sm btn-info"/> </div> </form> </div> </div> </div>';t.exports=g},4232:t=>{t.exports='<div class="list-inline-item data-icon bg-hover rounded-lg"> <i class="icon-more-vert rounded-circle" data-toggle="dropdown"></i> <div class="dropdown-menu"> <a class="dropdown-item" data-action="open-new-tab">{{open_new_tab}}</a> <a class="dropdown-item" data-action="open-new-window">{{open_new_window}}</a> <a class="dropdown-item" data-action="open-incognito">{{open_incognito}}</a> <div class="dropdown-divider"></div> <div class="dropdown-item move" data-action="move"> {{move}} <div class="move-to rounded-right"> </div> </div> <a class="dropdown-item edit" data-action="edit">{{edit}}</a> <a class="dropdown-item remove" data-action="remove">{{remove}}</a> </div> <div class="list-inline-item-data" title="{{title}}"> <div class="icon-box"> {{img}} </div> <div class="title mt-1">{{title}}</div> </div> </div>'},529:(t,e,i)=>{var s=i(7091),a=i(4597),n=i(5554),o=i(2998),d=i(8022),r=i(4158),l=i(2676),c=i(1848),h=i(1920),p=i(3212),g='<div class="widget-list-main"> <div class="col"> <div class="mb-2"> <form> <input type="text" class="search-input form-control form-control-sm d-inline-block shadow-sm"> </form> </div> <div class="table-responsive"> <table class="table table-hover"> <thead> <tr> <th width="10%">{{icon}}</th> <th width="70%">{{name}}</th> <th width="20%"></th> </tr> </thead> <tbody> <tr> <td class="text-center"><img src="'+s(a)+'"/></td> <td class="widget-name" data-type="weather" data-name="{{widget_weather}}">{{widget_weather}} - {{widget_weather_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(n)+'"/></td> <td class="widget-name" data-type="dtime" data-name="{{widget_dtime}}">{{widget_dtime}} - {{widget_dtime_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(o)+'"/></td> <td class="widget-name" data-type="pdf" data-name="{{widget_pdf_converter}}">{{widget_pdf_converter}} - {{widget_pdf_converter_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(d)+'"/></td> <td class="widget-name" data-type="MapsDirections" data-name="{{widget_maps_directions}}">{{widget_maps_directions}} - {{widget_maps_directions_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(r)+'"/></td> <td class="widget-name" data-type="MapsLocations" data-name="{{widget_maps_locations}}">{{widget_maps_locations}} - {{widget_maps_locations_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr class="widget-gmail"> <td class="text-center"><img src="'+s(l)+'"/></td> <td class="widget-name" data-type="gmail" data-name="{{widget_gmail}}" data-type="">{{widget_gmail}} - {{widget_gmail_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(c)+'"/></td> <td class="widget-name" data-type="todo" data-name="{{widget_todo}}">{{widget_todo}} - {{widget_todo_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(h)+'"/></td> <td class="widget-name" data-type="notes" data-name="{{widget_notes}}">{{widget_notes}} - {{widget_notes_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> <tr> <td class="text-center"><img src="'+s(p)+'"/></td> <td class="widget-name" data-type="tracking" data-name="{{widget_tracking}}">{{widget_tracking}} - {{widget_tracking_desc}}</td> <td class="text-right"><a class="btn btn-sm btn-outline-info">{{add}}</a></td> </tr> </tbody> </table> </div> </div> </div>';t.exports=g},5554:(t,e,i)=>{"use strict";t.exports=i.p+"images/dtime.png"},2676:(t,e,i)=>{"use strict";t.exports=i.p+"images/gmail.png"},8022:(t,e,i)=>{"use strict";t.exports=i.p+"images/maps_directions.png"},4158:(t,e,i)=>{"use strict";t.exports=i.p+"images/maps_locations.png"},1920:(t,e,i)=>{"use strict";t.exports=i.p+"images/notes.png"},2998:(t,e,i)=>{"use strict";t.exports=i.p+"images/pdf.png"},1848:(t,e,i)=>{"use strict";t.exports=i.p+"images/todo.png"},3212:(t,e,i)=>{"use strict";t.exports=i.p+"images/tracking.png"},4597:(t,e,i)=>{"use strict";t.exports=i.p+"images/weather.png"},8919:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SortableTouch:()=>s});class s{constructor(t={}){this.options={selector:null,swap:.3,swapNS:!1,onDown:(t,e)=>{},onMove:(t,e)=>{},onUp:(t,e)=>{},onMergeEnter:(t,e,i)=>{},onMergeOut:(t,e,i)=>{},onMerge:(t,e,i)=>{},onSwap:(t,e,i)=>{},stayTime:1e3,mergeAllow:!0,zIndex:9999999},this.options=Object.assign(this.options,t),this.offsetX=0,this.offsetY=0,this.clientX=0,this.clientY=0,this.currentClientX=0,this.currentClientY=0,this.timeout=null,this.dragging=!1,this.merging=!1,this.supportTouchEvent()?this.eventTypes={down:"touchstart",up:"touchend",move:"touchmove"}:this.eventTypes={down:"mousedown",up:"mouseup",move:"mousemove"},this.activeElement=null,this.targetElement=null,this.virElement=null,this.virElementId="__virElement",this.options.selector?this.initEvents():this.elements=[]}initEvents(){this.elements=[],this.options.selector instanceof Node?this.elements.push(this.options.selector):this.options.selector instanceof NodeList?this.elements=this.options.selector:this.elements=document.querySelectorAll(this.options.selector),this._downEvent=t=>this.downEvent(t),this.nodeListToArray(),this.elements.forEach((t=>{t.addEventListener(this.eventTypes.down,this._downEvent)}))}destroy(){this.elements.forEach((t=>{t.removeEventListener(this.eventTypes.down,this._downEvent)})),this.elements=[]}nodeListToArray(){const t=[];this.elements instanceof NodeList&&(this.elements.forEach((e=>{t.push(e)})),this.elements=t)}addElement(t){t.sort=this.elements.length,t.addEventListener(this.eventTypes.down,this._downEvent),this.elements.push(t)}downEvent(t){if(t instanceof MouseEvent&&1!=t.which)return;this.activeElement=t.currentTarget,this.setPositionAll(),this.dragging=!0,"mousedown"==t.type&&this.cancelDefaultEvent(t);const e=this.activeElement.getBoundingClientRect();let i=t.touches?t.touches[0]:t;this.clientX=i.clientX,this.clientY=i.clientY,this.offsetX=e.left,this.offsetY=e.top;let s=this,a=function(t){return s.moveEvent(t)};document.addEventListener(this.eventTypes.move,a);let n=function(t){return document.removeEventListener(s.eventTypes.move,a),document.removeEventListener(s.eventTypes.up,n),s.upEvent(t)};document.addEventListener(this.eventTypes.up,n),this.options.onDown(this.activeElement,t)}_isMerge(t,e,i){const s=t.getBoundingClientRect();return e>s.left&&e<s.right&&i>s.top&&i<s.bottom}setPositionAll(){this.elements.forEach(((t,e)=>{t.sort=e}))}moveEvent(t){this.virElement||(this.virElement=document.createElement("div"),this.virElement.id=this.virElementId,this.virElement.className=this.virElementId,this.virElement.style.position="fixed",this.virElement.style.listStyleType="none",this.virElement.style.opacity=.7,this.virElement.style.zIndex=this.options.zIndex,this.virElement.style.top=this.activeElement.offsetTop+"px",this.virElement.style.left=this.activeElement.offsetLeft+"px",this.virElement.style.margin="0",this.virElement.appendChild(this.activeElement.cloneNode(!0)),document.body.append(this.virElement));let e=t.touches?t.touches[0]:t,i=e.clientX-this.clientX,s=e.clientY-this.clientY;if(i+=this.offsetX,s+=this.offsetY,this.virElement.style.top=s+"px",this.virElement.style.left=i+"px",this.dragging){this.currentClientX=e.clientX,this.currentClientY=e.clientY;let i=!1;for(let t=0;t<this.elements.length;t++){const e=this.elements[t];if(this.activeElement!=e&&this._isMerge(e,this.currentClientX,this.currentClientY)){if(i=!0,this.targetElement==this.activeElement||this.targetElement==e)break;this.targetElement=e;break}}if(i||(this.merging&&(this.merging=!1,this.options.onMergeOut(this.activeElement,this.targetElement,t)),this.targetElement=null),null!==this.targetElement&&this.activeElement!=this.targetElement){const e=this.targetElement.getBoundingClientRect();let i=e.left+e.width*this.options.swap,s=e.left+(e.width-e.width*this.options.swap),a=e.top+e.top*this.options.swap,n=e.bottom-e.height*this.options.swap;if(this.options.swapNS?this.currentClientY>=a&&this.currentClientY<=n:this.currentClientX>=i&&this.currentClientX<=s){this.merging&&(this.merging=!1,this.options.onMergeOut(this.activeElement,this.targetElement,t)),this.options.onSwap(this.activeElement,this.targetElement,t);let e=this.activeElement.getBoundingClientRect(),i=this.targetElement.getBoundingClientRect();const s=this.targetElement.parentNode;this.activeElement.sort>this.targetElement.sort?s.insertBefore(this.activeElement,this.targetElement):s.insertBefore(this.activeElement,this.targetElement.nextSibling),this.swapAnimate(e,this.activeElement),this.swapAnimate(i,this.targetElement),this.targetElement=this.activeElement,"string"==typeof this.options.selector&&(this.elements=document.querySelectorAll(this.options.selector)),this.nodeListToArray(),this.setPositionAll()}this.options.mergeAllow&&(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{if(this.dragging&&this.targetElement&&this._isMerge(this.targetElement,this.currentClientX,this.currentClientY)){if(this.activeElement==this.targetElement)return;this.merging=!0,this.options.onMergeEnter(this.activeElement,this.targetElement,t)}this.timeout=null}),this.options.stayTime))}}this.options.onMove(this.virElement,t)}upEvent(t){let e=t.changedTouches?t.changedTouches[0]:t;this.dragging=!1,"mouseup"==t.type&&this.cancelDefaultEvent(t),this.options.mergeAllow&&this.merging&&(this.merging=!1,this.options.onMerge(this.activeElement,this.targetElement,e)),this.virElement&&(this.virElement.remove(),this.virElement=null),this.options.onUp(this.activeElement,t),this.activeElement=null,this.targetElement=null}supportTouchEvent(){let t=!0;try{document.createEvent("TouchEvent")}catch(e){t=!1}return t}swapAnimate(t,e){const i=e.getBoundingClientRect();e.style.transition="none",e.style.transform="translate3d("+(t.left-i.left)+"px, "+(t.top-i.top)+"px, 0)",e.offsetWidth,e.style.transition="all 300ms",e.style.transform="translate3d(0, 0, 0)",clearTimeout(e.animated),e.animated=setTimeout((()=>{e.style.transition="",e.style.transform="",e.animated=null}),300)}cancelDefaultEvent(t){t.preventDefault(),t.stopPropagation()}}},2346:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ShortcutItemBase:()=>n});var s=i(5996),a=i(4371);class n extends s.Z{constructor(t={}){super(),this.id=null,this.type=null,this.name=null,this.url=null,this.icon="",this.page="",this.sort=0,this.parentId=null,this.setParams(t)}setParams(t){for(let e in t)"type"!=e&&null!=t[e]&&this.hasOwnProperty(e)&&(this[e]=t[e]);this.id||(this.id=(0,a.createId)(this.type,8))}}},7140:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>h});var s=i(8051),a=i(1961),n=i(9405),o=i(2346),d=i(797),r=i(9755),l=i.n(r);class c extends o.ShortcutItemBase{constructor(t={}){super(t),this.type="folder",this.childItems=t.childItems?t.childItems:{}}createFolder(t){for(let t in this.childItems)this.childItems[t].parentId=this.id;let e={type:this.type,name:this.name,page:this.page,sort:this.sort,childItems:this.childItems};this.dataSync((()=>(e.id=this.id,n.Z.updateShortcut(e),!0)),(async()=>{let i=a.Z.get("shortcut","createFolder"),s=await this.request({method:i.method,url:i.url,params:e});return this.id=s.data,t(),!0}))}appendChild(t){this.dataSync((()=>{let e=n.Z.getShortcutForPage(t.page).data[this.id];return t.parentId=e.id,e.childItems[t.id]=t,this.childItems[t.id]=t,n.Z.updateShortcut(e),!0}),(()=>{let e=a.Z.get("shortcut","addToFolder");return this.request({method:e.method,url:e.url,params:{id:t.id,sort:t.sort,folderId:this.id}}),!0}))}update(){let t={id:this.id,name:this.name};this.dataSync((()=>{let e=n.Z.getShortcutForPage(this.page);return e.data[this.id].name=t.name,n.Z.setShortcutForPage(e,this.page),!0}),(()=>{let e=a.Z.get("shortcut","update");return this.request({method:e.method,url:e.url,params:t}),!0}))}delete(){let t=l()("#folder-popup-"+this.id);t.length>0&&(t.remove(),l()(".popup-overlay").remove()),this.dataSync((()=>(n.Z.deleteShortcut(this.page,this.id),!0)),(()=>{let t=a.Z.get("shortcut","deleteFolder");return this.request({method:t.method,url:t.url,params:{id:this.id}}),!0}))}click(t){let e={};if(s.X.isGuest){let t=n.Z.getShortcutForPage(this.page);e=t.data[this.id]}else{let t=l()("#"+this.id);e.childItems={};let i=this;t.find(".folder-item").each((function(t){let s={id:l()(this).attr("data-id"),name:l()(this).attr("data-name"),type:l()(this).attr("data-type"),bgColor:l()(this).attr("data-bgColor"),url:l()(this).attr("data-url"),sort:l()(this).attr("data-sort"),icon:l()(this).attr("data-icon"),parentId:i.id};e.childItems[s.id]=s}))}if(this.popup){const i=l()("#folder-popup-"+this.id+" .folder-content");for(let s in e.childItems)if(0==i.find("#"+e.childItems[s].id).length){let a=t._createElement(e.childItems[s]);i.append(a),this.sortableHandle.addElement(a.get(0))}this.popup.open()}else{let o=i(1200),r=l()(o);for(let i in e.childItems){let s=t._createElement(e.childItems[i]);r.append(s)}const{Popup:c}=i(8560);this.popup=new c({width:"500px",height:"440px",content:r.get(0),overlay:!0,overlayCloseClick:!0,draggable:!1,resizable:!1,headerText:this.name,contentClass:"folder-popup",containerClass:"folder-popup-main",id:"folder-popup-"+this.id});let h=!1,p=!1;const{SortableTouch:g}=i(8919);this.sortableHandle=new g({selector:"#folder-popup-"+this.id+" .data-icon",mergeAllow:!0,onSwap:()=>{h=!0},onUp:()=>{if(h&&(h=!1,t.updateOrder(this.id)),p){p=!1;let i=l()("#p-"+this.page+" .data-icon").length;if(i>=d.Z.SHORTCUT_MAX_COUNT)return alert(s.X.locale.get("max_shortcuts",{num:d.Z.SHORTCUT_MAX_COUNT})),!1;if(!this.sortableHandle.activeElement)return;this.popup.close();let o=e.childItems[this.sortableHandle.activeElement.getAttribute("id")];t._deleteElement(o);const r=t._createElement(o);l()("#page-main #p-"+s.X.user.pageActive+" .app-box").find(".add-btn").before(r),t.sortableHandle.addElement(r.get(0)),document.dispatchEvent(new MouseEvent("mouseup"));try{document.dispatchEvent(new TouchEvent("touchend"))}catch(t){}this.dataSync((()=>{let t=n.Z.getShortcutForPage(this.page);return t.data[o.parentId]&&delete t.data[o.parentId].childItems[o.id],n.Z.setShortcutForPage(t,this.page),n.Z.updateShortcut(Object.assign(o,{parentId:null})),!0}),(async()=>{let t=a.Z.get("shortcut","moveOutFolder");return this.request({method:t.method,url:t.url,params:{id:o.id,sort:i}}),!0}))}},onMove:(t,e)=>{const i=document.getElementById("folder-popup-"+this.id+"-main");if(!i)return;const s=i.getBoundingClientRect();p=!(e.clientX>s.left&&e.clientX<s.right&&e.clientY>s.top&&e.clientY<s.bottom)}})}}}const h=c},5339:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>c});var s=i(8051),a=i(1961),n=i(9405),o=i(2346),d=i(2183),r=i(4371);class l extends o.ShortcutItemBase{constructor(t={}){super(t),this.type="gmail",this.bgColor=t.bgColor?t.bgColor:"",this.icon="/dist/images/widget/gmail.png",this.unread=0,new Promise((async(t,e)=>{let i=await(0,d.bG)({cmd:"gmail_flush_unread"});if(this.unread=i.unread,this.unread>0){let t=i.unread>100?"99+":i.unread,e=document.createElement("i");e.textContent=t,document.querySelector("#"+CSS.escape(this.id)).querySelector(".icon-box").appendChild(e)}t(!0)}))}insert(t){let e={type:this.type,name:this.name,url:this.url,icon:this.icon,page:this.page,sort:this.sort,bgColor:this.bgColor,parentId:this.parentId};this.dataSync((()=>(e.id=this.id,n.Z.updateShortcut(e),!0)),(async()=>{let i=a.Z.get("shortcut","insert"),s=await this.request({method:i.method,url:i.url,params:e});return this.id=s.data,t(),!0}))}update(){let t={id:this.id,type:this.type,name:this.name,url:this.url,icon:this.icon,page:this.page,sort:this.sort,bgColor:this.bgColor,parentId:this.parentId};this.dataSync((()=>(n.Z.updateShortcut(t),!0)),(()=>{let e=a.Z.get("shortcut","update");return this.request({method:e.method,url:e.url,params:t}),!0}))}updateIcon(){return!0}delete(){this.dataSync((()=>{if(this.parentId){let t=n.Z.getShortcutForPage(this.page);t.data[this.parentId]&&(delete t.data[this.parentId].childItems[this.id],n.Z.setShortcutForPage(t,this.page))}else n.Z.deleteShortcut(this.page,this.id);return!0}),(()=>{let t=a.Z.get("shortcut","delete");return this.request({method:t.method,url:t.url,params:{id:this.id}}),!0}))}click(){let t="";const{Popup:e}=i(8560),a=new e({content:t,overlay:!0,overlayCloseClick:!0,draggable:!0,resizable:!0,headerText:this.name,width:"40vw",height:"50vh",draggableOptions:{inElement:document.body},resizableOptions:{setPosition:!0},onClose:()=>{a.container.remove()}});if(s.X.extIntalled)new Promise((async(e,i)=>{let s=await(0,d.bG)({cmd:"gmail_html_link"});t=document.createElement("iframe"),s&&s.src&&(t.src=s.src),t.setAttribute("frameBorder",0),t.setAttribute("width","100%"),t.setAttribute("height","100%"),a.setContent(t),e(!0)}));else{let t=document.createElement("div");t.setAttribute("class","gmail-ext-prompt");let e="";r.DetectClient.isChrome()?e=s.X.rateUrl.chrome:r.DetectClient.isFirefox()?e=s.X.rateUrl.firefox:r.DetectClient.isEdgeForChromium()&&(e=s.X.rateUrl.edge),t.innerHTML=s.X.locale.get("gmail_install_prompt",{ext_url:e}),a.setContent(t)}return!1}}const c=l},3331:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>c});var s=i(8051),a=i(1961),n=i(9405),o=i(2346),d=i(4371),r=i(6327);class l extends o.ShortcutItemBase{constructor(t={}){super(t),this.type="website",this.bgColor=t.bgColor?t.bgColor:""}insert(t){let e={type:this.type,name:this.name,url:this.url,icon:this.icon,page:this.page,sort:this.sort,bgColor:this.bgColor,parentId:this.parentId};this.dataSync((()=>(e.id=this.id,n.Z.updateShortcut(e),!0)),(async()=>{let i=a.Z.get("shortcut","insert"),s=await this.request({method:i.method,url:i.url,params:e});return this.id=s.data,t(),!0}))}update(){let t={id:this.id,type:this.type,name:this.name,url:this.url,icon:this.icon,page:this.page,sort:this.sort,bgColor:this.bgColor,parentId:this.parentId};this.dataSync((()=>(n.Z.updateShortcut(t),!0)),(()=>{let e=a.Z.get("shortcut","update");return this.request({method:e.method,url:e.url,params:t}),!0}))}updateIcon(){let t={id:this.id,page:this.page,icon:this.icon};this.dataSync((()=>(n.Z.updateShortcut(t),!0)),(()=>{let e=a.Z.get("shortcut","updateIcon");return this.request({method:e.method,url:e.url,params:t}),!0}))}delete(){this.dataSync((()=>{if(this.parentId){let t=n.Z.getShortcutForPage(this.page);t.data[this.parentId]&&(delete t.data[this.parentId].childItems[this.id],n.Z.setShortcutForPage(t,this.page))}else n.Z.deleteShortcut(this.page,this.id);return!0}),(()=>{let t=a.Z.get("shortcut","delete");return this.request({method:t.method,url:t.url,params:{id:this.id}}),!0}))}click(){s.X.setting.openShortcut==r.TQ.NEWTAB?window.open(this.getUrl()):location.href=this.getUrl()}getUrl(){let t=this.url;return s.X.redirect&&(0,d.matchUrl)(t,s.X.webList)&&(t=s.X.redirect+encodeURIComponent(t)),t}}const c=l},6048:(t,e,i)=>{var s={"./ShortcutItemBase":2346,"./ShortcutItemBase.js":2346,"./folder":7140,"./folder.js":7140,"./gmail":5339,"./gmail.js":5339,"./website":3331,"./website.js":3331};function a(t){var e=n(t);return i(e)}function n(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}a.keys=function(){return Object.keys(s)},a.resolve=n,t.exports=a,a.id=6048},4026:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Shortcut:()=>u});var s=i(8051),a=i(5996),n=i(1961),o=i(9405),d=i(9755),r=i.n(d),l=i(2183),c=i(8560),h=i(797),p=i(4371),g=i(2485),m=i(2346);class u extends a.Z{constructor(t){super(),this.page=t,this.selector="#page-main #p-"+t.id+" .app-box",this.elAppbox=r()(this.selector),this.sortableHandle=null,this.elAddBtn=this.elAppbox.find(".add-btn"),this.elShortcutForm=null,this.elShortcutName=null,this.elShortcutUrl=null,this.tmpIconItem='<div class="folder-item" data-type="{{type}}" data-name="{{name}}" data-bgColor="{{bgColor}}" data-url="{{url}}" data-id="{{id}}" data-sort="{{sort}}" data-icon="{{icon}}">{{img}}</div>',this.maxCount=h.Z.SHORTCUT_MAX_COUNT}checkMaxCount(){this.dataSync((()=>{let t=o.Z.getShortcutForPage(this.page.id).data;return Object.keys(t).length}),(async()=>{let t=n.Z.get("pages","checkMaxCount");return(await this.request({method:t.method,url:t.url,params:{pageId:this.page.id}})).data})).then((t=>{t>=this.maxCount?this.elAddBtn.addClass("d-none"):this.elAddBtn.removeClass("d-none")}))}updateOrder(t){let e=t?s.X.user.pageActive:this.page.id,i=t?"#folder-popup-"+t:this.selector,a={},d={},l={};if(s.X.isGuest){let s={};l=o.Z.getShortcutForPage(e),s=l.data,t&&(s=l.data[t].childItems),r()(i+" .data-icon").each((function(t){let e=r()(this).attr("id");s[e].sort=t,d[e]=s[e],r()(this).attr("data-sort",t),a[e]=t}))}else{const t=this.getStByDom;r()(i+" .data-icon").each((function(i){let s=r()(this).attr("id");d[i]=t(r()(this),e),r()(this).attr("data-sort",i),a[s]=i}))}if(t){const e=r()("#"+t+" .folder-box");e.empty();let i="",s=0;for(let t in d)s>=9||(s++,i+=this.createFolderThumbHtml(d[t]));e.append(i)}this.dataSync((()=>(t?l.data[t].childItems=d:l.data=d,o.Z.setShortcutForPage(l,e),!0)),(()=>{let i=n.Z.get("shortcut","sort");return this.request({method:i.method,url:i.url,params:{pageId:e,items:a,folderId:t}}),!0}))}load(){this.elAddBtn.on("click",(()=>{this.openPopup()}));let t=this.page.shortcutList;for(const e in t){let i=t[e];if([u.TYPE.WEBSITE,u.TYPE.GMAIL].indexOf(i.type)>=0){i=u.create(i);let t=this._createElement(i);this.elAddBtn.before(t),i.icon||this.fetchIcon(i,t)}else if(i.type==u.TYPE.FOLDER){let t=u.create(i);this.elAddBtn.before(this._createFolder(t))}}this.checkMaxCount();let e=!1;const{SortableTouch:a}=i(8919);this.sortableHandle=new a({selector:this.selector+" .data-icon",mergeAllow:!0,stayTime:100,swap:.47,onSwap:()=>{e=!0},onUp:()=>{e&&(e=!1,this.updateOrder())},onMergeEnter:(t,e,i)=>{t.getAttribute("data-type")==u.TYPE.WEBSITE&&e.classList.add("mergeing")},onMerge:(t,e,i)=>{let a=t.getAttribute("data-type"),n=e.getAttribute("data-type");if(a!=u.TYPE.WEBSITE)return;let d=o.Z.getShortcutForPage(this.page.id),l=s.X.isGuest?d.data[t.getAttribute("id")]:this.getStByDom(r()(t),this.page.id),c=s.X.isGuest?d.data[e.getAttribute("id")]:this.getStByDom(r()(e),this.page.id);n==u.TYPE.FOLDER?this.addToFolder(l,c):this.addFolder(l,c),e.classList.remove("mergeing")},onMergeOut:(t,e,i)=>{e.classList.remove("mergeing")}})}getStByDom(t,e){return{id:t.attr("id"),name:t.find(".title").text(),icon:t.find(".icon").attr("src"),bgColor:t.find(".text-icon div").css("background-color"),sort:t.attr("data-sort"),page:e,url:t.attr("data-url"),type:t.attr("data-type")}}createFolderThumbHtml(t){let e=t.icon?t.icon:"",i=t.bgColor?t.bgColor:"",s=t.url?t.url:"";return this.tmpIconItem.replace("{{img}}",this._showIcon(t)).replace("{{icon}}",e).replace("{{type}}",t.type).replace("{{name}}",t.name).replace("{{bgColor}}",i).replace("{{url}}",s).replace("{{sort}}",t.sort).replace("{{id}}",t.id)}_showIcon(t){let e="";return e=t.icon?'<img class="icon" src="'+t.icon+'" />':'<div class="text-icon rounded-lg"><div style="background-color:'+t.bgColor+'"><span>'+t.name.slice(0,2).toLocaleUpperCase()+"</span></div></div>",e}rebindSortable(t){const e=this.page.handler.list[t].shortcut.sortableHandle;e.destroy(),e.initEvents(),this.sortableHandle.destroy(),this.sortableHandle.initEvents()}_createElement(t){const e=t instanceof m.ShortcutItemBase?t:u.create(t);if(!e)return;let a=i(4232);a=a.replace("{{open_new_tab}}",s.X.locale.get("open_new_tab")),a=a.replace("{{open_incognito}}",s.X.locale.get("open_incognito")),a=a.replace("{{open_new_window}}",s.X.locale.get("open_new_window")),a=a.replace("{{edit}}",s.X.locale.get("edit")),a=a.replace("{{remove}}",s.X.locale.get("remove")),a=a.replace("{{move}}",s.X.locale.get("move_to"));let d=this._showIcon(e);a=a.replace("{{img}}",d),a=a.replace(/{{title}}/g,e.name);const c=r()(a);return c.attr("data-type",t.type),t.type==u.TYPE.GMAIL&&(c.find(".dropdown-divider").hide(),c.find('[data-action="open-new-tab"]').hide(),c.find('[data-action="open-new-window"]').hide(),c.find('[data-action="open-incognito"]').hide(),c.find('[data-action="edit"]').hide()),c.find(".icon-more-vert").on("click",(async(t,i)=>{if(r()("#page-item li:visible").length<=1)return c.find('[data-action="move"]').hide(),!0;c.find('[data-action="move"]').show(),c.find(".move-to").empty();const a=r()("#page-item li.active").attr("data-to");r()("#page-item li:visible").each(((t,i)=>{let d=r()(i);const l=d.attr("data-to");if(l==a)return;const p=r()('<div data-to="'+l+'">'+d.find("span").text()+"</div>");p.on("click",(t=>{const i=e.page;if(i==l)return!1;let a=r()("#p-"+l+" .data-icon").length;if(a>=h.Z.SHORTCUT_MAX_COUNT)return alert(s.X.locale.get("max_shortcuts",{num:h.Z.SHORTCUT_MAX_COUNT})),!1;this._deleteElement(e),e.page=l;const d=this._createElement(Object.assign(e,{parentId:null}));return r()("#page-main #p-"+l+" .app-box .add-btn").before(d),a=r()("#p-"+l+" .data-icon").length,a>=h.Z.SHORTCUT_MAX_COUNT&&r()("#page-main #p-"+l+" .app-box .add-btn").addClass("d-none"),r()("#p-"+this.page.id+" .data-icon").length<h.Z.SHORTCUT_MAX_COUNT&&this.elAddBtn.removeClass("d-none"),this.page.handler.list[l].shortcut.sortableHandle.addElement(d.get(0)),this.dataSync((()=>{let t=o.Z.getShortcutForPage(l);if(e.parentId&&0!=e.parentId){let t=o.Z.getShortcutForPage(i);delete t.data[e.parentId].childItems[e.id],o.Z.setShortcutForPage(t,i),e.parentId=null}else o.Z.deleteShortcut(i,e.id);return t.data[e.id]=e,o.Z.setShortcutForPage(t,l),!0}),(()=>{e.parentId&&0!=e.parentId&&(e.parentId=null);let t=n.Z.get("shortcut","moveToPage");return this.request({method:t.method,url:t.url,params:{pageId:l,id:e.id,sort:a}}),!0})),!1})),c.find(".move-to").append(p)}))})),c.attr("id",e.id),c.attr("data-id",e.id),c.attr("data-sort",e.sort),c.attr("data-url",e.url),c.on("click",(t=>{let i=t.target.classList.contains("dropdown-item");if("dropdown"!=t.target.getAttribute("data-toggle")&&!i)return e.click();switch(t.target.getAttribute("data-action")){case"open-new-tab":window.open(e.getUrl()),(0,g.GA)("send",{hitType:"event",eventCategory:g.w.SHORTCUT.KEY,eventAction:g.w.SHORTCUT.NEW_TAB});break;case"open-new-window":l.hj.openNewWindow(e.getUrl()),(0,g.GA)("send",{hitType:"event",eventCategory:g.w.SHORTCUT.KEY,eventAction:g.w.SHORTCUT.NEW_WINDOW});break;case"open-incognito":l.hj.openIncognito(e.getUrl()),(0,g.GA)("send",{hitType:"event",eventCategory:g.w.SHORTCUT.KEY,eventAction:g.w.SHORTCUT.INCOGNITO});break;case"edit":this.openPopup(e);break;case"remove":e.delete(),this._deleteElement(e),this.checkMaxCount(),(0,g.GA)("send",{hitType:"event",eventCategory:g.w.SHORTCUT.KEY,eventAction:g.w.SHORTCUT.DELETE})}})),c}_deleteElement(t){t.parentId&&0!=t.parentId?(r()("#"+t.id).remove(),r()('.folder-item[data-id="'+t.id+'"]').remove(),this._deleteFolder(t)):r()("#"+t.id).remove()}_createFolder(t){let e="";for(let i in t.childItems)e+=this.createFolderThumbHtml(t.childItems[i]);let a=i(8411);a=a.replace("{{edit}}",s.X.locale.get("edit")),a=a.replace("{{move}}",s.X.locale.get("move_to")),a=a.replace("{{items}}",e),a=a.replace(/{{title}}/g,t.name);const d=r()(a);d.attr("data-type",u.TYPE.FOLDER);const l=this.dataSync;return d.find(".icon-more-vert").on("click",(async(e,i)=>{if(r()("#page-item li:visible").length<=1)return d.find('[data-action="move"]').hide(),!0;d.find('[data-action="move"]').show(),d.find(".move-to").empty();const a=r()("#page-item li.active").attr("data-to");r()("#page-item li:visible").each(((e,i)=>{let c=r()(i);const p=c.attr("data-to");if(p==a)return;const g=r()('<div data-to="'+p+'">'+c.find("span").text()+"</div>");g.on("click",(e=>{const i=t.page;if(i==p)return!1;let a=r()("#p-"+p+" .data-icon").length;return a>=h.Z.SHORTCUT_MAX_COUNT?(alert(s.X.locale.get("max_shortcuts",{num:h.Z.SHORTCUT_MAX_COUNT})),!1):(d.find(".move-to div").each((function(){r()(this).attr("data-to")==p?r()(this).addClass("d-none"):r()(this).removeClass("d-none")})),d.find(".dropdown-menu").removeClass("show"),r()("#page-main #p-"+p+" .app-box .add-btn").before(d),a=r()("#p-"+p+" .data-icon").length,a>=h.Z.SHORTCUT_MAX_COUNT&&r()("#page-main #p-"+p+" .app-box .add-btn").addClass("d-none"),r()("#p-"+this.page.id+" .data-icon").length<h.Z.SHORTCUT_MAX_COUNT&&this.elAddBtn.removeClass("d-none"),this.page.handler.list[p].shortcut.sortableHandle.addElement(d.get(0)),l((()=>{t.childItems=o.Z.getShortcut(t.page,t.id).childItems;let e=o.Z.getShortcutForPage(p);for(let e in t.childItems)t.childItems[e].page=p,r()("#"+t.childItems[e].id).find(".move-to div").each((function(){r()(this).attr("data-to")==p?r()(this).addClass("d-none"):r()(this).removeClass("d-none")}));return t.page=p,e.data[t.id]=t,o.Z.setShortcutForPage(e,p),o.Z.deleteShortcut(i,t.id),!0}),(()=>{t.page=p;let e=n.Z.get("shortcut","moveToPage");return this.request({method:e.method,url:e.url,params:{pageId:p,id:t.id,sort:a}}),!0})),!1)})),d.find(".move-to").append(g)}))})),d.attr("id",t.id),d.attr("data-id",t.id),d.attr("data-sort",t.sort),d.on("click",(e=>{let i=e.target.classList.contains("dropdown-item");if("dropdown"!=e.target.getAttribute("data-toggle")&&!i)return t.click(this);switch(e.target.getAttribute("data-action")){case"edit":this.editFolderPopup(t)}})),d}_deleteFolder(t){if(0==r()("#"+t.parentId+" .folder-box .folder-item").length){let e=s.X.isGuest?o.Z.getShortcut(t.page,t.parentId):{type:"folder",id:t.parentId};if(!e)return;const i=u.create(e);if(!i)return;i.delete(),r()("#"+i.id).remove()}}openPopup(t){let e=null,a=null,n="",o="500px",d=null;if(t?a=i(7516):(a=i(2514),n="sc-popup",o="600px",d="400px"),a=a.replace(/{{name}}/g,s.X.locale.get("shortcut_name")),a=a.replace(/{{url}}/,s.X.locale.get("shortcut_url")),a=a.replace(/{{done}}/,s.X.locale.get("done")),a=a.replace(/{{cancel}}/,s.X.locale.get("cancel")),a=a.replace(/{{popular}}/,s.X.locale.get("shortcut_popular")),a=a.replace(/{{custom}}/,s.X.locale.get("shortcut_custom")),a=a.replace(/{{icon}}/g,s.X.locale.get("icon")),a=a.replace(/{{widgets}}/g,s.X.locale.get("widgets")),a=a.replace(/{{add}}/g,s.X.locale.get("add")),a=a.replace(/{{widget_pdf_converter}}/g,s.X.locale.get("widget_pdf_converter")),a=a.replace(/{{widget_pdf_converter_desc}}/g,s.X.locale.get("widget_pdf_converter_desc")),a=a.replace(/{{widget_maps_locations}}/g,s.X.locale.get("widget_maps_locations")),a=a.replace(/{{widget_maps_locations_desc}}/g,s.X.locale.get("widget_maps_locations_desc")),a=a.replace(/{{widget_maps_directions}}/g,s.X.locale.get("widget_maps_directions")),a=a.replace(/{{widget_maps_directions_desc}}/g,s.X.locale.get("widget_maps_directions_desc")),a=a.replace(/{{widget_gmail}}/g,s.X.locale.get("widget_gmail")),a=a.replace(/{{widget_gmail_desc}}/g,s.X.locale.get("widget_gmail_desc")),a=a.replace(/{{widget_todo}}/g,s.X.locale.get("widget_todo")),a=a.replace(/{{widget_todo_desc}}/g,s.X.locale.get("widget_todo_desc")),a=a.replace(/{{widget_tracking}}/g,s.X.locale.get("widget_tracking")),a=a.replace(/{{widget_tracking_desc}}/g,s.X.locale.get("widget_tracking_desc")),a=a.replace(/{{widget_dtime}}/g,s.X.locale.get("widget_dtime")),a=a.replace(/{{widget_dtime_desc}}/g,s.X.locale.get("widget_dtime_desc")),a=a.replace(/{{widget_weather}}/g,s.X.locale.get("widget_weather")),a=a.replace(/{{widget_weather_desc}}/g,s.X.locale.get("widget_weather_desc")),a=a.replace(/{{widget_notes}}/g,s.X.locale.get("widget_notes")),a=a.replace(/{{widget_notes_desc}}/g,s.X.locale.get("widget_notes_desc")),this.elShortcutForm=r()(a),this.elShortcutRight=this.elShortcutForm.find(".sc-right"),this.elPopular=this.elShortcutRight.find(".sc-popular"),this.elWidgets=this.elShortcutRight.find(".sc-widgets"),!t&&s.X.popular.length>0){const t=this.elPopular.find("tbody");this.elPopular.find(".search-input").on("keyup",(e=>{let i=r().trim(r()(e.currentTarget).val());if(""!=i)for(let e in s.X.popular){let a=t.find('tr[data-i="'+e+'"]');s.X.popular[e].name.toLowerCase().indexOf(i)>-1?a.show():a.hide()}else t.find("tr").show()}));for(let i in s.X.popular){let a=s.X.popular[i],n='<tr data-i="'+i+'"><td class="text-center"><img src="'+a.icon+'" /></td><td>'+a.name+'</td><td class="text-right"><a class="btn btn-sm btn-outline-info">'+s.X.locale.get("add")+"</a></td></tr>";const o=r()(n);o.find(".btn").on("click",(()=>{this.add({type:a.type,name:a.name,url:a.url,icon:a.icon}),e.close()})),t.append(o)}}const l=this.elWidgets.find("tbody");this.elWidgets.find(".search-input").on("keyup",(t=>{let e=r().trim(r()(t.currentTarget).val());""!=e?this.elWidgets.find(".widget-name").each((function(){let t=r()(this).parents("tr");r()(this).attr("data-name").toLocaleLowerCase().indexOf(e)>-1?t.show():t.hide()})):l.find("tr").show()})),l.find("tr").each(((t,s)=>{let a=r()(s),n=a.find(".widget-name").attr("data-type");a.find(".btn").on("click",(()=>{const{Widget:t}=i(2208);new t(this.page).add({type:n}),e.close()}))})),this.elShortcutName=this.elShortcutForm.find("#name"),this.elShortcutUrl=this.elShortcutForm.find("#url"),this.elShortcutForm.find(".sc-left").find("li").on("click",(t=>{const e=r()(t.target);if(e.hasClass("active"))return;this.elShortcutForm.find("li").removeClass("active");let i=e.attr("id");"sc-custom"==i&&setTimeout((()=>{this.elShortcutName.get(0).focus()}),1),e.addClass("active"),this.elShortcutRight.find(".sc-right-box").addClass("d-none"),this.elShortcutRight.find("."+i).removeClass("d-none")})),e=new c.Popup({id:"sc-popup",width:o,height:d,contentClass:n,content:this.elShortcutForm.get(0),overlay:!0,overlayCloseClick:!0,draggable:!1,resizable:!1,headerText:t?s.X.locale.get("edit_shortcut"):s.X.locale.get("add_shortcut"),onClose:()=>{e.container.remove()}}),this.elShortcutName.get(0).focus(),t?(t.name&&this.elShortcutName.val(t.name),t.url&&this.elShortcutUrl.val(t.url)):(this.elShortcutName.val(""),this.elShortcutUrl.val("")),this.elShortcutForm.on("submit",(i=>{let s=this.elShortcutName.val(),a=this.elShortcutUrl.val();if(t){let e=t.url;t.name=s,t.url=a,this.edit(t,e)}else this.add({type:u.TYPE.WEBSITE,name:s,url:a});return e.close(),!1})),this.elShortcutForm.find(".btn-cancel").on("click",(()=>{e.close()}))}editFolderPopup(t){let e=i(2772);e=e.replace(/{{name}}/,s.X.locale.get("shortcut_name")),e=e.replace(/{{done}}/,s.X.locale.get("done")),e=e.replace(/{{cancel}}/,s.X.locale.get("cancel")),this.elShortcutForm=r()(e);const a=new c.Popup({content:this.elShortcutForm.get(0),overlay:!0,overlayCloseClick:!0,draggable:!1,resizable:!1,headerText:s.X.locale.get("edit_folder"),onClose:()=>{a.container.remove()}});this.elShortcutName=this.elShortcutForm.find("#name"),this.elShortcutName.get(0).focus(),t&&t.name&&this.elShortcutName.val(t.name),this.elShortcutForm.on("submit",(e=>{let i=this.elShortcutName.val();return t.name=i,r()("#"+t.id).find(".title").text(t.name),t.update(),a.close(),!1})),this.elShortcutForm.find(".btn-cancel").on("click",(()=>{a.close()}))}add(t){if(!t.sort){let e=0;const i=r()(this.selector+" .data-icon:last");i.length>0&&(e=parseInt(i.attr("data-sort"))+1),t.sort=e}const e=u.create(t);if(e.bgColor=(0,p.randomColors)(),e.type==u.TYPE.WEBSITE&&!this._validate(e))return!1;let i=e.id;e.page=this.page.id,e.insert((()=>{r()("#"+i).attr({id:e.id,"data-id":e.id})}));const s=this._createElement(e);this.elAddBtn.before(s),this.sortableHandle.addElement(s.get(0)),t.icon||this.fetchIcon(e,s),this.checkMaxCount(),(0,g.GA)("send",{hitType:"event",eventCategory:g.w.SHORTCUT.KEY,eventAction:g.w.SHORTCUT.ADD})}edit(t,e){if(!this._validate(t,!0))return!1;let i=null;i=r()("#"+t.id),i.find(".title").text(t.name),i.find(".list-inline-item-data").attr("title",t.name),i.attr("data-url",t.url),t.icon||i.find(".text-icon").children().text(t.name.slice(0,2).toLocaleUpperCase()),t.update(),e!=t.url&&this.fetchIcon(t,i),(0,g.GA)("send",{hitType:"event",eventCategory:g.w.SHORTCUT.KEY,eventAction:g.w.SHORTCUT.EDIT})}addFolder(t,e){let i={},a=t.sort;t.sort=0,e.sort=1,i[t.id]=t,i[e.id]=e;let n={sort:a,name:"Folder",type:u.TYPE.FOLDER,page:this.page.id,childItems:i};const d=u.create(n),l=this._createFolder(d);for(let t in d.childItems){const e=this.elAppbox.find("#"+d.childItems[t].id);e.before(l),e.remove(),s.X.isGuest&&o.Z.deleteShortcut(this.page.id,d.childItems[t].id)}this.sortableHandle.addElement(l.get(0));let c=d.id;d.createFolder((()=>{r()("#"+c).attr({id:d.id,"data-id":d.id})})),this.checkMaxCount(),this.updateOrder(),(0,g.GA)("send",{hitType:"event",eventCategory:g.w.SHORTCUT.KEY,eventAction:g.w.SHORTCUT.FOLDER})}addToFolder(t,e){const i=this.elAppbox.find("#"+e.id+" .folder-box");let a=i.find(".folder-item").length;t.sort=a,i.append(this.createFolderThumbHtml(t)),this.elAppbox.find("#"+t.id).remove(),s.X.isGuest&&o.Z.deleteShortcut(this.page.id,t.id),u.create(e).appendChild(t),(0,g.GA)("send",{hitType:"event",eventCategory:g.w.SHORTCUT.KEY,eventAction:g.w.SHORTCUT.FOLDER})}_validate(t,e=!1){return t.name=r().trim(t.name),t.url=r().trim(t.url),!!t.url&&(e||t.name||(t.name=t.url.slice(0,20)),t.url.indexOf("https://")<0&&t.url.indexOf("http://")<0&&(t.url="http://"+t.url),!0)}fetchIcon(t,e){let i=n.Z.get("icon","fetch");this.request({method:i.method,url:i.url,params:{url:t.url}}).then((i=>{let s=i.data;if(s&&s.icons&&s.icons.length>0&&s.icons[0].width>=32){let i=s.icons[0].url;t.icon=i;const a=document.createElement("img");a.setAttribute("class","icon"),a.setAttribute("src",t.icon),e.find(".icon-box").empty(),e.find(".icon-box").append(a),t.updateIcon(i)}}))}}u.TYPE={WEBSITE:"website",FOLDER:"folder",GMAIL:"gmail"},u.create=t=>{let e=null;switch(t.type){case u.TYPE.WEBSITE:case u.TYPE.FOLDER:case u.TYPE.GMAIL:e=i(6048)("./"+t.type);break;default:return!1}return new e.default(t)}},2208:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Widget:()=>r});var s=i(8051),a=i(5996),n=i(9755),o=i.n(n),d=i(8560);class r extends a.Z{constructor(t){super(),this.page=t,this.selector="#page-main #p-"+t.id+" .widgets-box",this.elWidgetBox=o()(this.selector)}load(){let t=this.page.widgetList;if(!t)return;let e=Object.keys(t);for(let i=0;i<e.length;i++){let s=t[e[i]];r.create(s.type).then((({default:t})=>{new t(s).load(this.elWidgetBox.get(0))}))}}add(t){r.create(t.type).then((({default:e})=>{const i=new e(t);let s=i.id;i.page=this.page.id,i.load(this.elWidgetBox.get(0)),i.insert((()=>{o()("#"+s).attr({id:i.id,"data-id":i.id}),i.popup&&i.popup.header.setAttribute("data-target",i.id)}))}))}}r.TYPE={GMAIL:"gmail",PDF:"pdf",TODO:"todo",TRACKING:"tracking"},r.create=t=>i(5351)("./"+t);let l=null;r.showList=t=>{if(l)return void l.open();let e=i(529);e=e.replace(/{{icon}}/g,s.X.locale.get("icon")),e=e.replace(/{{name}}/g,s.X.locale.get("shortcut_name")),e=e.replace(/{{add}}/g,s.X.locale.get("add")),e=e.replace(/{{widget_pdf_converter}}/g,s.X.locale.get("widget_pdf_converter")),e=e.replace(/{{widget_pdf_converter_desc}}/g,s.X.locale.get("widget_pdf_converter_desc")),e=e.replace(/{{widget_maps_locations}}/g,s.X.locale.get("widget_maps_locations")),e=e.replace(/{{widget_maps_locations_desc}}/g,s.X.locale.get("widget_maps_locations_desc")),e=e.replace(/{{widget_maps_directions}}/g,s.X.locale.get("widget_maps_directions")),e=e.replace(/{{widget_maps_directions_desc}}/g,s.X.locale.get("widget_maps_directions_desc")),e=e.replace(/{{widget_gmail}}/g,s.X.locale.get("widget_gmail")),e=e.replace(/{{widget_gmail_desc}}/g,s.X.locale.get("widget_gmail_desc")),e=e.replace(/{{widget_todo}}/g,s.X.locale.get("widget_todo")),e=e.replace(/{{widget_todo_desc}}/g,s.X.locale.get("widget_todo_desc")),e=e.replace(/{{widget_tracking}}/g,s.X.locale.get("widget_tracking")),e=e.replace(/{{widget_tracking_desc}}/g,s.X.locale.get("widget_tracking_desc")),e=e.replace(/{{widget_dtime}}/g,s.X.locale.get("widget_dtime")),e=e.replace(/{{widget_dtime_desc}}/g,s.X.locale.get("widget_dtime_desc")),e=e.replace(/{{widget_weather}}/g,s.X.locale.get("widget_weather")),e=e.replace(/{{widget_weather_desc}}/g,s.X.locale.get("widget_weather_desc")),e=e.replace(/{{widget_notes}}/g,s.X.locale.get("widget_notes")),e=e.replace(/{{widget_notes_desc}}/g,s.X.locale.get("widget_notes_desc"));const a=o()(e),n=a.find("tbody");a.find(".search-input").on("keyup",(t=>{let e=o().trim(o()(t.currentTarget).val());""!=e?a.find(".widget-name").each((function(){let t=o()(this).parents("tr");o()(this).attr("data-name").toLocaleLowerCase().indexOf(e)>-1?t.show():t.hide()})):n.find("tr").show()})),n.find("tr").each(((e,i)=>{let s=o()(i),a=s.find(".widget-name").attr("data-type");s.find(".btn").on("click",(()=>{const e=o()("#page-item li.active").attr("data-to");new r(t.list[e]).add({type:a}),l.close()}))})),l=new d.Popup({id:"widget-list-popup",width:"600px",height:"400px",contentClass:"widget-list",content:a.get(0),overlay:!0,overlayCloseClick:!0,draggable:!1,resizable:!1,headerText:s.X.locale.get("widgets")})}},5351:(t,e,i)=>{var s={"./":[2208,9],"./MapsDirections":[6607,9,1665,3951],"./MapsDirections/":[6607,9,1665,3951],"./MapsDirections/index":[6607,9,1665,3951],"./MapsDirections/index.css":[6606,9,6606],"./MapsDirections/index.js":[6607,9,1665,3951],"./MapsDirections/index.phtml":[5989,7,5989],"./MapsLocations":[634,9,1665,3639,6772],"./MapsLocations/":[634,9,1665,3639,6772],"./MapsLocations/index":[634,9,1665,3639,6772],"./MapsLocations/index.css":[638,9,3639,638],"./MapsLocations/index.js":[634,9,1665,3639,6772],"./MapsLocations/index.phtml":[6005,7,6005],"./WidgetBase":[1665,9,1665,8444],"./WidgetBase.js":[1665,9,1665,8444],"./dtime":[798,9,1665,1722],"./dtime/":[798,9,1665,1722],"./dtime/index":[798,9,1665,1722],"./dtime/index.css":[8708,9,8708],"./dtime/index.js":[798,9,1665,1722],"./dtime/index.phtml":[9103,7,9103],"./dtime/setting.phtml":[1425,7,1425],"./gmail":[1984,9,1665,7344],"./gmail/":[1984,9,1665,7344],"./gmail/index":[1984,9,1665,7344],"./gmail/index.css":[4352,9,4352],"./gmail/index.js":[1984,9,1665,7344],"./index":[2208,9],"./index.css":[4582,9,4582],"./index.js":[2208,9],"./list.phtml":[529,7],"./notes":[7514,9,1665,8026],"./notes/":[7514,9,1665,8026],"./notes/index":[7514,9,1665,8026],"./notes/index.css":[6911,9,6911],"./notes/index.js":[7514,9,1665,8026],"./notes/setting.phtml":[6106,7,6106],"./pdf":[2614,9,1665,3499],"./pdf/":[2614,9,1665,3499],"./pdf/index":[2614,9,1665,3499],"./pdf/index.css":[3098,9,3098],"./pdf/index.js":[2614,9,1665,3499],"./pdf/index.phtml":[6399,7,6399],"./todo":[72,9,1665,8442],"./todo/":[72,9,1665,8442],"./todo/index":[72,9,1665,8442],"./todo/index.css":[8156,9,8156],"./todo/index.js":[72,9,1665,8442],"./todo/index.phtml":[7725,7,7725],"./todo/setting.phtml":[5875,7,5875],"./todo/task.phtml":[6796,7,6796],"./tracking":[2899,9,1665,4304,4596],"./tracking/":[2899,9,1665,4304,4596],"./tracking/index":[2899,9,1665,4304,4596],"./tracking/index.css":[3025,9,4304,3025],"./tracking/index.js":[2899,9,1665,4304,4596],"./tracking/index.phtml":[1140,7,1140],"./weather":[4589,9,1665,8180],"./weather/":[4589,9,1665,8180],"./weather/form.phtml":[4669,7,4669],"./weather/index":[4589,9,1665,8180],"./weather/index.css":[680,9,680],"./weather/index.js":[4589,9,1665,8180],"./weather/setting.phtml":[1693,7,1693],"./weather/view.phtml":[4320,7,4320]};function a(t){if(!i.o(s,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],a=e[0];return Promise.all(e.slice(2).map(i.e)).then((()=>i.t(a,16|e[1])))}a.keys=()=>Object.keys(s),a.id=5351,t.exports=a}}]);