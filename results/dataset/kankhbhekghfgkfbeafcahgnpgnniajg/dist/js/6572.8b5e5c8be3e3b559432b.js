(self.webpackChunknewtab=self.webpackChunknewtab||[]).push([[6572],{6755:e=>{e.exports='<form id="pass-form"> <div class="alert d-none"> <span class="alert-msg-content"></span> </div> <div class="form-group"> <label>{{current_password}}:</label> <input type="password" id="current-password" name="current-password" required="required" class="form-control form-control-sm"> </div> <div class="form-group"> <label>{{new_password}}:</label> <input type="password" id="new-password" name="new-password" required="required" class="form-control form-control-sm"> </div> <div class="form-group"> <label>{{repeat_password}}:</label> <input type="password" id="repeat-password" name="repeat-password" required="required" class="form-control form-control-sm"> </div> <div class="form-group row mt-4"> <div class="remove col-sm-6 text-left invisible"> <input type="button" value="{{remove}}" data-toggle="tooltip" data-placement="top" title="{{remove-tip}}" class="btn btn-remove btn-sm btn btn-danger"> </div> <div class="col-sm-6 text-right"> <input type="button" value="{{cancel}}" class="btn btn-cancel btn-sm btn-light"> <input type="submit" value="{{done}}" class="btn btn-submit btn-sm btn-info"/> </div> </div> </form>'},6572:(e,s,a)=>{"use strict";a.r(s),a.d(s,{User:()=>w});var r=a(8051),t=a(5996),o=a(1961),l=a(9755),n=a.n(l);function p(e,s={}){let a={validClass:"validate-valid",errorClass:"validate-error",errorElement:"label",focusInvalid:!0};return a=Object.assign(a,s),n()(e).validate(a)}a(3587),p.setMessages=function(e){n().validator.messages=Object.assign(n().validator.messages,e)},p.getMessages=function(){return n().validator.messages};const d=p;var c=a(9405),i=a(6327),u=a(8560);class w extends t.Z{constructor(){super(),this.passPopup=null}init(){const e=n()("#userface");e.attr({"data-toggle":"dropdown"}),e.html('<img src="'+r.X.user.info.face+'" />');let s=a(6755);s=s.replace("{{current_password}}",r.X.locale.get("current_password")),s=s.replace("{{new_password}}",r.X.locale.get("new_password")),s=s.replace("{{repeat_password}}",r.X.locale.get("repeat_password")),s=s.replace("{{cancel}}",r.X.locale.get("cancel")),s=s.replace("{{done}}",r.X.locale.get("done"));const t=n()(s);n()("#change-pass-btn").on("click",(()=>{if(this.passPopup)return this.passPopup.open(),void n()("#current-password").get(0).focus();this.passPopup=new u.Popup({content:t.get(0),overlay:!0,overlayCloseClick:!0,draggable:!1,resizable:!1,contentClass:"change-pass-popup",headerText:r.X.locale.get("change_password"),id:"change-pass-popup"}),n()("#current-password").get(0).focus(),d("#pass-form",{submitHandler:(e,s)=>{let a=n()("#current-password").val(),t=n()("#new-password").val(),l=n()("#repeat-password").val(),p=o.Z.get("user","changePass");this.request({method:p.method,url:p.url,params:{currentPassword:a,newPassword:t,repeatPassword:l}}).then((e=>{let s=r.X.locale.get("change_password_fail"),a="alert-warning";e.status&&(n()("#change-pass-popup .alert").removeClass(a),s=r.X.locale.get("change_password_success"),a="alert-success",n()("#current-password").val(""),n()("#new-password").val(""),n()("#repeat-password").val("")),e.messages&&(s=e.messages),n()("#change-pass-popup .alert").removeClass("d-none").addClass(a).text(s)}))},rules:{"current-password":{required:!0},"new-password":{required:!0,minlength:6},"repeat-password":{required:!0,equalTo:"#new-password"}},messages:{"current-password":{required:r.X.locale.get("field_is_required",{field:r.X.locale.get("current_password")})},"new-password":{required:r.X.locale.get("field_is_required",{field:r.X.locale.get("new_password")})},"repeat-password":{required:r.X.locale.get("field_is_required",{field:r.X.locale.get("repeat_password")}),equalTo:r.X.locale.get("field_is_required",{field:r.X.locale.get("repeat_password_incorrect")})}}})})),t.find(".btn-cancel").on("click",(()=>{this.passPopup.close()})),n()("#logout-btn").on("click",(()=>{c.Z.remove(i.ZP.account.key),location.reload()}))}}}}]);