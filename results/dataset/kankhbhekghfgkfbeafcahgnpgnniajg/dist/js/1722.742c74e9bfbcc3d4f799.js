(self.webpackChunknewtab=self.webpackChunknewtab||[]).push([[1722,8444,9103,1425],{6523:t=>{t.exports='<span class="pointer"></span> <input type="hidden" id="{{name}}" name="{{name}}" value="{{value}}" class="input"/> <label class="text">{{text}}</label>'},9103:t=>{t.exports='<div class="dtime_container"> <div class="time_minute_flex"> <span class="time_minute">{{hour_minute}}</span> <span class="time_ampm">{{amText}}</span> </div> <div class="time_day_week"> <div class="time_day">{{show_date_format}}</div> <div class="time_week">{{time_week}}</div> </div> </div>'},1425:t=>{t.exports='<form class="dtime-form"> <div class="form-group"> <label class="control-label align-top">{{hour24}}:</label> <div id="hour24" class="switch-box d-inline-block align-middle"></div> </div> <div class="form-group"> <label class="control-label">{{dateformat}}:</label> <select id="dateFormat" class="form-control form-control-sm"> <option value="yyyy/mm/dd">yyyy/mm/dd</option> <option value="yyyy-mm-dd">yyyy-mm-dd</option> <option value="mm/dd/yyyy">mm/dd/yyyy</option> <option value="yy/m/d">yy/m/d</option> <option value="m/d/yy">m/d/yy</option> </select> </div> <div class="form-group text-right mt-4"> <input type="button" value="{{cancel}}" class="btn btn-cancel btn-sm btn-light"> <input type="submit" value="{{done}}" class="btn btn-submit btn-sm btn-info"/> </div> </form>'},8280:(t,e,i)=>{"use strict";i.d(e,{r:()=>o}),i(8051);var s=i(9755),a=i.n(s);class o{constructor(t={}){this.options={container:null,template:i(6523),name:"",value:[1,0],text:["On","Off"],activeColor:"#808080",inactiveColor:"#6bde5d",status:!0,onChange:t=>{},callback:(t,e,i)=>{}},this.options=Object.assign(this.options,t);let e=this.options.template;e=e.replace(/{{text}}/,""),e=e.replace(/{{name}}/g,this.options.name),this.elView=a()(e),this.container=this.options.container,this.container.append(this.elView),this.elPointer=this.container.find(".pointer"),this.elInput=this.container.find(".input"),this.elText=this.container.find(".text"),this.status=this.options.status,this.container.on("click",(t=>{this.toggle()})),this.status?this.on():this.off()}toggle(){this.status?this.off():this.on(),this.options.onChange(this.status)}on(){this.status=!0,this.elPointer.css({marginLeft:"34px"}),this.options.container.css({backgroundColor:this.options.inactiveColor,borderColor:this.options.inactiveColor}),this.elText.css({left:"0px"});let t=this.options.value[0],e=this.options.text[0];this.elText.text(e),this.elInput.val(t),this.options.callback(this.status,t,e)}off(){this.status=!1,this.elPointer.css({marginLeft:"0px"}),this.options.container.css({backgroundColor:this.options.activeColor,borderColor:this.options.activeColor}),this.elText.css({left:"20px"});let t=this.options.value[1],e=this.options.text[1];this.elText.text(e),this.elInput.val(t),this.options.callback(this.status,t,e)}}},798:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>d});var s=i(8051),a=i(1665),o=i(9755),n=i.n(o),l=i(8280),r=i(8560);const m=["sun","mon","tues","wed","thur","fri","sat"];class h extends a.WidgetBase{constructor(t={}){super(t),this.elDtimebox=null,this.type="dtime",this.attrs||(this.attrs={hour24:!1,dateFormat:"mm/dd/yyyy"}),this.dtimeData={}}load(t){this.initDtimeData(t),this.bindEvent(),setInterval((()=>{this.updateTimeData()}),1e3)}initDtimeData(t){this.getNowTime();let e=i(9103);e=e.replace("{{hour_minute}}",this.dtimeData.hour+":"+this.dtimeData.minute),e=e.replace("{{show_date_format}}",this.dtimeData.formatDate),e=e.replace("{{amText}}",this.amText()),e=e.replace("{{time_week}}",this.timeWeek());const a=document.createElement("div");a.innerHTML=e,this.openPopup({width:"100px",height:"130px",content:a.firstChild,elParent:t,containerClass:"widget-modalbox-transparent",contentClass:"widget-dtime",resizable:!1},((t,e)=>{let i=document.createElement("a");i.setAttribute("class","dropdown-item"),i.textContent=s.X.locale.get("setting"),i.addEventListener("click",(()=>{this.openSetting()})),t.append(i)})),this.elDtimebox=n()("#"+this.id),this.attrs.hour24&&this.elDtimebox.find(".time_ampm").hide()}openSetting(){if(this.settingPopup)return void this.settingPopup.open();let t=i(1425);t=t.replace(/{{hour24}}/g,s.X.locale.get("hours_24")),t=t.replace(/{{dateformat}}/,s.X.locale.get("date_format")),t=t.replace(/{{done}}/,s.X.locale.get("done")),t=t.replace(/{{cancel}}/,s.X.locale.get("cancel")),this.elForm=n()(t),new l.r({container:this.elForm.find("#hour24"),name:"hourSet",text:["On","Off"],status:this.attrs.hour24}),this.settingPopup=new r.Popup({id:this.id+"setting-popup",content:this.elForm.get(0),overlay:!0,overlayCloseClick:!0,draggable:!1,resizable:!1,headerText:s.X.locale.get("time_setting")});let e=this.elForm.find("#hourSet"),a=this.elForm.find("#dateFormat");a.find('option[value="'+this.attrs.dateFormat+'"]').attr("selected",!0),this.elForm.on("submit",(t=>{let i=1==e.val(),s=a.val();return this.attrs.hour24=i,this.attrs.dateFormat=s,this.update(),this.settingPopup.close(),!1})),this.elForm.find(".btn-cancel").on("click",(()=>{this.settingPopup.close()}))}updateTimeData(){this.getNowTime(),this.elDtimebox.find(".time_minute").text(this.dtimeData.hour+":"+this.dtimeData.minute),this.elDtimebox.find(".time_day").text(this.dtimeData.formatDate),this.elDtimebox.find(".time_ampm").text(this.amText()),this.elDtimebox.find(".time_week").text(this.timeWeek()),this.attrs.hour24?this.elDtimebox.find(".time_ampm").hide():this.elDtimebox.find(".time_ampm").show()}timeWeek(){return s.X.locale.get(this.dtimeData.week)}amText(){return s.X.locale.get(this.dtimeData.am)}getNowTime(){let t=new Date;this.dtimeData.formatDate=this.dateFormat(this.attrs.dateFormat,t);let e=t.getHours();this.dtimeData.am=e<12?"AM":"PM",this.attrs.hour24||(e=e<12?e:e-12),e="00"+e,this.dtimeData.hour=e.toString().substr(e.length-2);let i="00"+t.getMinutes();this.dtimeData.minute=i.toString().substr(i.length-2),this.dtimeData.second=t.getSeconds(),this.dtimeData.week=m[t.getDay()]}dateFormat(t,e){const i=e.getFullYear().toString(),s=(e.getMonth()+1).toString(),a=e.getDate().toString();return(t=(t=(t=(t=(t=t.replace("yyyy",i)).replace("yy",i.substr(2))).replace("mm",s.padStart(2,0))).replace("m",s)).replace("dd",a.padStart(2,0))).replace("d",a)}bindEvent(){this.elDtimebox.on("click",(t=>{this.openPopup()}))}}const d=h}}]);