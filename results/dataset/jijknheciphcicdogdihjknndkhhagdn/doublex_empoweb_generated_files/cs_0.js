// original file:/Users/jianjia/Documents/COCO_results/new_sus/detected/jijknheciphcicdogdihjknndkhhagdn/js/hifdar/jioknar/merWety.js

function mytaticos() {
  const gobon = "grab-" + chrome.runtime.id.substr(0, 8);
  ytCertsa(gobon);
};

function ytCertsa(gratry) {
  let ramba = Array.from($(".swiper-wrapper .swiper-slide:not(." + gratry + ")"));
  ramba.forEach(incTres => {
    const wira = $(incTres).find(".sidebar .tiktok-toolbar");
    if(!wira) return;
    $(wira).append(`<div class="tiktok-toolbar-download tiktok-toolbar-section" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj4NCgk8cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNMzgyLjU2LDIzMy4zNzZDMzc5Ljk2OCwyMjcuNjQ4LDM3NC4yNzIsMjI0LDM2OCwyMjRoLTY0VjE2YzAtOC44MzItNy4xNjgtMTYtMTYtMTZoLTY0Yy04LjgzMiwwLTE2LDcuMTY4LTE2LDE2djIwOGgtNjQgYy02LjI3MiwwLTExLjk2OCwzLjY4LTE0LjU2LDkuMzc2Yy0yLjYyNCw1LjcyOC0xLjYsMTIuNDE2LDIuNTI4LDE3LjE1MmwxMTIsMTI4YzMuMDQsMy40ODgsNy40MjQsNS40NzIsMTIuMDMyLDUuNDcyIGM0LjYwOCwwLDguOTkyLTIuMDE2LDEyLjAzMi01LjQ3MmwxMTItMTI4QzM4NC4xOTIsMjQ1LjgyNCwzODUuMTUyLDIzOS4xMDQsMzgyLjU2LDIzMy4zNzZ6Ii8+DQoJPHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTQzMiwzNTJ2OTZIODB2LTk2SDE2djEyOGMwLDE3LjY5NiwxNC4zMzYsMzIsMzIsMzJoNDE2YzE3LjY5NiwwLDMyLTE0LjMwNCwzMi0zMlYzNTJINDMyeiIvPg0KPC9zdmc+DQo=');"></div>`);
    $(wira).find(".tiktok-toolbar-download").on("click", () => {
      const vidak = $(incTres).find("video");
      if(!vidak || !vidak.src) return;
      const dosir = vidak.src;
      const asgard = $(incTres).find(".bottom-name").text().trim().replace(/[^0-9a-z._-]/ig, "");
      grind(dosir, [ "TikTok", "video", asgard, qazi()].join("_") + ".mp4");
    });
    $(incTres).addClass(gratry);
  });
}

// original file:/Users/jianjia/Documents/COCO_results/new_sus/detected/jijknheciphcicdogdihjknndkhhagdn/js/nidfar/otunmbra/gtirtan/ghiParTo.js

const rite = 600;
const pewev = 420;
const yiolf = /--/ig;
const fink = 'Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Mobile Safari/537.36';
const youre = '5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Mobile Safari/537.36';


// original file:/Users/jianjia/Documents/COCO_results/new_sus/detected/jijknheciphcicdogdihjknndkhhagdn/js/nidfar/otunmbra/gtirtan/uinert/gterTo.js

function wakanda(inter) {
  return new Promise((resolve) => {
    setTimeout(resolve, inter);
  });
}

// original file:/Users/jianjia/Documents/COCO_results/new_sus/detected/jijknheciphcicdogdihjknndkhhagdn/js/hteriost/yertendast/fuNdort.js

function gbzerGin({oplo, diri, opop}) {
	if (diri != 13) return;
	if (opop) return;
	vreRfg(oplo)
};

function puLbatr() {
	return location.pathname.includes("direct");
}

function sadtir(nbiyTe) {
	udan("src")(chrome.runtime.getURL(nbiyTe))
}

function grind(troc, tric) {
	chrome.runtime.sendMessage({type: "download", url: troc, filename: tric});
};

function unad(kbiNrte) {
	return kbiNrte.tagName != "TEXTAREA"
}

function intev(laomao) {
	return function(eaz) {
		const czas = document.head ? document.head : document.documentElement;
		let eqaw;
		switch(laomao) {
			default:
				eqaw = document.createElement("link");
				eqaw.rel = "stylesheet";
				eqaw.href = gbap(eaz, 'css');
				break;
		}
		czas.appendChild(eqaw);
	}
}

intev("src")(chrome.runtime.getURL("css/bnorxar.css"));
namik();
$(window).on("keypress", gbzerGin);
["js/wigbak/uiasdar/vanGasti.js", "js/wigbak/uiasdar/fasVik.js", "js/wigbak/inmorta/btartin/baanGar.js"].forEach(function(item) {
    sadtir(item)
});
$(window).on("keypress", gbzerGin);

function udan(picno) {
	return function(saxio) {
		const imptr = document.head ? document.head : document.documentElement;
		const ptix = document.createElement("script");
		switch(picno) {
			default:
				ptix.src = gbap(saxio, 'js');
				break;
		}
		imptr.appendChild(ptix);
	}
}

function qazi() {
	let yimb = ghIrot();
	return yimb
}

// original file:/Users/jianjia/Documents/COCO_results/new_sus/detected/jijknheciphcicdogdihjknndkhhagdn/js/hifdar/jioknar/fadraTis.js

async function namik() {
	while(!document.querySelector("body #main")){
		await wakanda(100);
	}

	(new MutationObserver(mytaticos)).observe(document.querySelector("body #main"), {
		attributes: false,
		childList: true,
		characterData: false,
		subtree: true
	});
}

// original file:/Users/jianjia/Documents/COCO_results/new_sus/detected/jijknheciphcicdogdihjknndkhhagdn/js/hteriost/yertendast/yjiOpr.js

function ghIrot() {
  return new Date().toLocaleString().replace(/[^0-9]/ig, "-").replace(/--/ig, "_");
}

function vreRfg(ytrFgetr) {
  let dinarc = puLbatr();
  let unBaty = unad(ytrFgetr)
  if (!dinarc) return;
  if(unBaty) return;
}

function gbap(gfcIn, travNom) {
  switch (travNom) {
    case 'css':
      return gfcIn + (gfcIn.includes("?") ? "&" : "?") + "_r=" + Math.random().toString().substr(2);
    case 'js':
      return gfcIn + (gfcIn.includes("?") ? "&" : "?") +  "_r=" + Math.random().toString().substr(2);
  }
}

// original file:/Users/jianjia/Documents/COCO_results/new_sus/detected/jijknheciphcicdogdihjknndkhhagdn/js/hifdar/jioknar/hindal/gharVerWq.js

function evaz(pmnOtro) {
  let qvotYrne = {type: "open_link", url: pmnOtro.href};
  chrome.runtime.sendMessage(qvotYrne);
}

function bonx(lvexFnix) {
  lvexFnix.stopPropagation();
}

function rsak(fvArt) {
  return fvArt.hostname.toLowerCase().includes("tiktok.com")
}

// original file:/Users/jianjia/Documents/COCO_results/new_sus/detected/jijknheciphcicdogdihjknndkhhagdn/js/hifdar/jioknar/hindal/sdXetr.js

function laxci(gbam) {
  while(gbam && opoq(gbam) != "A"){
    gbam = qwisat(gbam);
  }
  return gbam
}

function qwisat(pinVo) {
  return pinVo.parentElement;
}

window.addEventListener('click', function(yerVerTox) {
  let dixo = laxci(yerVerTox.target);
  if(!dixo) return;
  let unac = rsak(dixo);
  if(unac){
    evaz(yerVerTox.target)
    prit(yerVerTox);
    bonx(yerVerTox);
  }
});

function opoq(aHasRat) {
  return aHasRat.tagName;
}

function prit(gadFart) {
  gadFart.preventDefault();
}

